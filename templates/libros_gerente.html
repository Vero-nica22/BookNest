<!--<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cat√°logo de Libros - Gerente</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f8f0e3;
    }

    header {
      background-color: #fef3dc;
      padding: 10px 20px;
    }

    .top-header {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .top-header img {
      height: 90px;
    }

    .top-header p {
      margin: 0;
      font-weight: bold;
      font-size: 18px;
    }

    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      gap: 40px;
      padding: 0;
      margin-top: 10px;
    }

    nav a {
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }

    .banner img {
      width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: cover;
    }

    main {
      padding: 30px;
      text-align: center;
    }

    .libros {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      margin-top: 20px;
    }

    .libro {
      width: 180px;
      text-align: left;
      position: relative;
    }

    .libro img {
      width: 100%;
      height: auto;
      display: block;
    }

    .visualizar {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: #ffffffcc;
      border: none;
      cursor: pointer;
      font-size: 18px;
      padding: 4px 6px;
      border-radius: 4px;
    }

    .visualizar:hover {
      background-color: #f0e2c6;
      transform: scale(1.1);
    }

    button.ver-mas {
      margin-top: 30px;
      padding: 10px 20px;
      background-color: #d4b48a;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }

    h2 {
      color: #3e3e3e;
    }
  </style>
</head>
<body>

  <header>
    <div class="top-header">
      <img src="Logobooknest.png" alt="Logo">
      <p><strong>Libros</strong></p>
    </div>
    <nav>
      <ul>
        <li><a href="#">Buscar Libros</a></li>
        <li><a href="#">Productos</a></li>
        <li><a href="#">Libros</a></li>
        <li><a href="#">Reservas</a></li>
      </ul>
    </nav>
  </header>

  <section class="banner">
    <img src="https://img.freepik.com/free-photo/open-old-books-stacked-closeup-blurred-background_169016-24881.jpg" alt="Banner">
  </section>

  <main>
    <h2>Encuentra tus libros favoritos aqu√≠</h2>
    <div class="libros">

      <div class="libro">
        <button class="visualizar" title="Visualizar">üëÅ</button>
        <img src="https://images.cdn2.buscalibre.com/fit-in/360x360/8a/9e/8a9ed4b676d987ffb8f1cece4aa5ad2a.jpg" alt="Bajo la Misma Estrella">
        <p><strong>Bajo la Misma Estrella</strong><br>John Green</p>
        <p>Hazel tiene diecis√©is a√±os, est√° enferma de c√°ncer desde peque√±a y sobrevive gracias a un milagro m√©dico.</p>
      </div>

      <div class="libro">
        <button class="visualizar" title="Visualizar">üëÅ</button>
        <img src="https://libreriasiglo.com/91502-large_360/romeo-y-julieta.webp" alt="Romeo y Julieta">
        <p><strong>Romeo y Julieta</strong><br>William Shakespeare</p>
        <p>Dos j√≥venes enamorados de familias enemigas viven una historia tr√°gica llena de amor y destino.</p>
      </div>

      <div class="libro">
        <button class="visualizar" title="Visualizar">üëÅ</button>
        <img src="https://images.cdn2.buscalibre.com/fit-in/360x360/6a/ca/6acabcfa8d03abc2b853155997d4b21d.jpg" alt="El Diario de Ana Frank">
        <p><strong>El Diario de Ana Frank</strong><br>Ana Frank</p>
        <p>Diario de una ni√±a jud√≠a que se esconde de los nazis durante la Segunda Guerra Mundial.</p>
      </div>

      <div class="libro">
        <button class="visualizar" title="Visualizar">üëÅ</button>
        <img src="https://m.media-amazon.com/images/I/81YOuOGFCJL.jpg" alt="Harry Potter">
        <p><strong>Harry Potter y la Piedra Filosofal</strong><br>J.K. Rowling</p>
        <p>Harry descubre que es un mago y asiste a Hogwarts, donde vive sus primeras aventuras m√°gicas.</p>
      </div>

      <div class="libro">
        <button class="visualizar" title="Visualizar">üëÅ</button>
        <img src="https://image.cdn1.buscalibre.com/5b57fc1690f0b5295a8b4567.RS360x360.jpg" alt="El Principito">
        <p><strong>El Principito</strong><br>Antoine de Saint-Exup√©ry</p>
        <p>Un peque√±o pr√≠ncipe viaja por el universo aprendiendo sobre la vida, el amor y la soledad.</p>
      </div>

    </div>

    <button class="ver-mas">Ver m√°s Libros</button>
  </main>

</body>
</html>-->


<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Libros - Gerente</title>
    <!--<link rel="stylesheet" href="../static/librosadmstyle.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">-->
    <link rel="stylesheet" href="../static/libros_gerente.css">
</head>

<body>
    <header>
    <div class="top-header">
      <img src="Logobooknest.png" alt="Logo">
      
    </div>
    <nav>
      <ul>
        <li><a href="#">Buscar Libros</a></li>
        <li><a href="#">Productos</a></li>
        <li><a href="#">Libros</a></li>
        <li><a href="#">Reservas</a></li>
        <a href="#"><img src="logout.png" alt="Cerrar sesi√≥n" class="logout-icon"> Cerrar sesi√≥n</a>
      </ul>
    </nav>
  </header>

  <section class="banner">
    <img src="https://img.freepik.com/free-photo/open-old-books-stacked-closeup-blurred-background_169016-24881.jpg" alt="Banner">
  </section>
    <main>
        <h2>Cat√°logo de Libros</h2>
        <div>
            <button type="button" onclick="location.href='/libros_cliente'">Ver rese√±as de libros</button>
        </div>


        <button id="mostrar-formulario-agregar" class="agregar">Agregar Nuevos Libros</button>


        <form id="form-agregar-libro" method="POST" action="{{ url_for('auth.libros') }}" enctype="multipart/form-data">
            <h3>Agregar Nuevo Libro</h3>
            <label for="titulo">T√≠tulo</label>
            <input type="text" name="titulo" id="titulo" required>
            <label for="autor">Autor</label>
            <input type="text" name="autor" id="autor" required>
            <label for="sinopsis">Sinopsis</label>
            <textarea name="sinopsis" id="sinopsis" rows="3" required></textarea>
            <label for="imagen">Imagen (jpg, png, gif)</label>
            <input type="file" name="imagen" id="imagen" accept=".png,.jpg,.jpeg,.gif">
            <button class="agregar" type="submit">Agregar Libro</button>
        </form>

        <div class="libros">
            {% for libro in libros %}
            <div class="libro">
                <div class="iconos">
                    <button type="button" 
                            data-id="{{ libro['id_libro'] }}" 
                            data-titulo="{{ libro['titulo'] }}"
                            data-autor="{{ libro['autor'] }}" 
                            data-sinopsis="{{ libro['sinopsis'] }}"
                            data-imagen="{{ libro['imagen'] }}"
                            onclick="openModal(this)">
                        Editar
                    </button>
                    <form method="POST" action="{{ url_for('auth.eliminar_libro', id=libro['id_libro']) }}"
                        onsubmit="return confirm('¬øSeguro que quieres eliminar este libro?');">
                        <button type="submit">üóë</button>
                    </form>
                </div>
                <img src="{{ url_for('static', filename='uploads/' + libro['imagen']) if libro['imagen'] else 'https://via.placeholder.com/180x240?text=No+Image' }}"
                    alt="{{ libro['titulo'] }}"> 
                <p><strong>{{ libro['titulo'] }}</strong><br>{{ libro['autor'] }}</p>
                <p>{{ libro['sinopsis'] }}</p>
            </div>
            {% endfor %}
        </div>
    </main>

    <div id="modalEditar" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h3>Editar Libro</h3>
        <img id="imagen-actual" src="" alt="Imagen Actual" style="max-width: 150px; margin-bottom: 10px;">
        
        <form id="form-editar-libro" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="id" id="editar-id">
            
            <label for="editar-titulo">T√≠tulo</label>
            <input type="text" name="titulo" id="editar-titulo" required>
            
            <label for="editar-autor">Autor</label>
            <input type="text" name="autor" id="editar-autor" required>
            
            <label for="editar-sinopsis">Sinopsis</label>
            <textarea name="sinopsis" id="editar-sinopsis" rows="3" required></textarea>
            
            <label for="editar-imagen">Cambiar Imagen (opcional)</label>
            <input type="file" name="imagen" id="editar-imagen" accept=".png,.jpg,.jpeg,.gif">
            
            <button type="submit">Guardar Cambios</button>
        </form>
    </div>
</div>

    <script>
    const formEditar = document.getElementById('form-editar-libro');

    function openModal(button) {
        const id_libro = button.getAttribute("data-id");
        const titulo = button.getAttribute("data-titulo");
        const autor = button.getAttribute("data-autor");
        const sinopsis = button.getAttribute("data-sinopsis");

        document.getElementById('editar-id').value = id_libro;
        document.getElementById('editar-titulo').value = titulo;
        document.getElementById('editar-autor').value = autor;
        document.getElementById('editar-sinopsis').value = sinopsis;

        const imgActual = document.getElementById('imagen-actual');
        if (imagen) {
            imgActual.src = `/static/uploads/${imagen}`;
        } else {
            imgActual.src = 'https://via.placeholder.com/150x200?text=Sin+Imagen';
        }


        formEditar.action = `/actualizar_libro/${id_libro}`;
        const modal = document.getElementById('modalEditar');
        modal.style.display = 'block';
    }


    function closeModal() {
        const modal = document.getElementById('modalEditar');
        modal.style.display = 'none';
    }

    window.onclick = function(event) {
        const modal = document.getElementById('modalEditar');
        if (event.target == modal) {
            closeModal();
        }
    }

    const botonMostrarAgregar = document.getElementById('mostrar-formulario-agregar');
    const formularioAgregarLibro = document.getElementById('form-agregar-libro');

    botonMostrarAgregar.addEventListener('click', function() {
        if (formularioAgregarLibro.style.display === 'none') {
            formularioAgregarLibro.style.display = 'block';
            botonMostrarAgregar.textContent = 'Ocultar Formulario';
        } else {
            formularioAgregarLibro.style.display = 'none';
            botonMostrarAgregar.textContent = 'Agregar Nuevos Libros';
        }
    });
    </script>

</body>
</html>
